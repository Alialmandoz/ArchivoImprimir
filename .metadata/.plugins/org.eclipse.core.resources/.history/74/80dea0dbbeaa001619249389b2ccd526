package gestion.dao;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;

import archivoImprimir.gestion.pojo.Cliente;

public class ClienteDao {
	
	private static EntityManagerFactory emf = Emf.emf;
	
//	public void createCliente(String nombre,String apellido, String mail, Long telefono) {
//
//		EntityManager man = emf.createEntityManager();
//		
//		Cliente cliente = new Cliente(nombre,apellido, mail, telefono);
//		 
//    	man.getTransaction().begin();
//    	
//    	man.persist(cliente);
//    	
//    	man.getTransaction().commit();
//    	
//    	man.close();

//	}
	
	public void crearCliente(String nombre, String apellido, String mail, Long telefono) {
		
		nombre = nombre.toLowerCase();
		apellido = apellido.toLowerCase();
		
				System.out.println("creando a " + nombre + " " + apellido);
				Cliente cliente = new Cliente(nombre, apellido, mail, telefono);
				EntityManager man = emf.createEntityManager();
		
				@SuppressWarnings("unchecked")
				List<Object> lista = man
						.createQuery("from Cliente c where nombre = '" + nombre.to + "' and apellido ='" + apellido + "'")
						.getResultList();
				// System.out.println(lista.size());
				if (lista.size() == 0) {
					man.getTransaction().begin();
		
					man.persist(cliente);
		
					man.getTransaction().commit();
		
					man.close();
		
				} else {
					System.out.println("el cliente " + cliente.getNombre() + " " + cliente.getApellido() + " ya existe");
		
				}
			}
	
	
	public void readAllClientes(){
		EntityManager man = emf.createEntityManager();
		@SuppressWarnings("unchecked")
		List <Object>lista = man.createQuery("from Cliente").getResultList();
		for (Object cliente : lista) {
			System.out.println(cliente.toString());
			}
		}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

}
